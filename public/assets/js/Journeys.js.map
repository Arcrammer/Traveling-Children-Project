{"version":3,"sources":["Journeys.coffee"],"names":[],"mappings":"AAAA;EAAA,CAAA,CAAE,QAAF,CAAW,CAAC,KAAZ,CAAkB,SAAA;AAEhB,QAAA;IAAA,CAAA,CAAE,OAAF,CAAU,CAAC,OAAX,CAAmB,SAAA;aACjB;QAAA,YAAA,EAAc,YAAd;QACA,WAAA,EAAa,GADb;;IADiB,CAAnB;IAKA,QAAA,GAAW,CAAA,CAAE,cAAF;IACX,WAAA,GAAc,CAAA,CAAE,oBAAF;IACd,YAAA,GAAe,CAAA,CAAE,sBAAF;IACf,UAAA,GAAa,CAAA,CAAE,qBAAF;IACb,SAAA,GAAY,CAAA,CAAE,oBAAF;IACZ,SAAA,GAAY,CAAA,CAAE,uBAAF;IACZ,SAAA,GAAY,CAAA,CAAE,YAAF;IACZ,SAAA,GAAY;IAEZ,WAAW,CAAC,KAAZ,CAAkB,SAAA;AAEhB,UAAA;MAAA,MAAA,GAAS;MACT,WAAA,GAAc,QAAS,CAAA,CAAA,CAAE,WAAF,CAAc,CAAC,KAAf,CAAqB,MAArB,CAAA;MACvB,SAAA,GAAY,CAAA,CAAE,WAAF,CAAc,CAAC,IAAf,CAAoB,YAApB;MAGZ,CAAC,CAAC,GAAF,CAAM,iBAAA,GAAoB,SAA1B,EAAqC,SAAC,YAAD;QAGnC,UAAU,CAAC,KAAX,GAAmB,YAAa,CAAA,OAAA;QAChC,SAAS,CAAC,KAAV,GAAkB,YAAa,CAAA,MAAA;QAC/B,SAAS,CAAC,KAAV,GAAkB,YAAa,CAAA,MAAA;QAC/B,SAAS,CAAC,KAAV,GAAkB;QAGlB,YAAY,CAAC,KAAb,GAAqB;QAIrB,CAAA,CAAE,eAAF,CAAmB,CAAA,CAAA,CAAE,CAAC,YAAtB,CAAmC,QAAnC,EAA6C,iBAAA,GAAoB,SAAjE;MAbmC,CAArC;IAPgB,CAAlB;IA+BA,YAAA,GAAe,CAAA,CAAE,sBAAF,CAA0B,CAAA,CAAA;IACzC,CAAA,CAAE,YAAF,CAAe,CAAC,KAAhB,CAAsB,SAAA;MACpB,YAAY,CAAC,KAAb,GAAqB;IADD,CAAtB;EAhDgB,CAAlB;AAAA","file":"Journeys.js","sourcesContent":["$(document).ready ->\n  # Grid\n  $('.grid').masonry ->\n    itemSelector: '.grid-item',\n    columnWidth: 200\n\n  # Get the edit form input elements\n  journeys = $('.journeyPost')\n  editButtons = $('.journeyEditButton')\n  submitButton = $('input[type=\"submit\"]')\n  titleField = $('input[name=\"title\"]')\n  dateField = $('input[name=\"date\"]')\n  bodyField = $('textarea[name=\"body\"]')\n  tagsField = $('input#tags')\n  journeyID = null\n\n  editButtons.click ->\n    # The 'Edit' button was clicked\n    button = this\n    journeyPost = journeys[$(editButtons).index(button)]\n    journeyID = $(journeyPost).data('journey-id')\n\n    # Ask the server for journey data as JSON\n    $.get '/journeys/show/' + journeyID, (travelerPost) ->\n      # The server has sent the JSON; Fill\n      # the edit forms' fields with it\n      titleField.value = travelerPost['title']\n      dateField.value = travelerPost['date']\n      bodyField.value = travelerPost['body']\n      tagsField.value = tags\n\n      # Change the form submission button text\n      submitButton.value = 'Update'\n\n      # Set the forms' 'action' to the method that\n      # persists the updated data to the database\n      $('.journey-form')[0].setAttribute 'action', '/journeys/edit/' + journeyID\n      return\n    return\n\n  # Because the 'edit' form reuses the 'create' forms'\n  # nodes it changes the forms' submission button text\n  # to say 'Update', but when the user has updated a\n  # journey and they go to create a new one the button\n  # still says 'Update', so we'll change it back to\n  # 'Create' every time they switch between the two\n  #\n  createButton = $('.journeyCreateButton')[0]\n  $(createButton).click ->\n    submitButton.value = 'Create'\n    return\n  return\n"],"sourceRoot":"/source/"}