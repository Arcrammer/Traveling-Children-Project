{"version":3,"sources":["Main.coffee","Journeys.coffee"],"names":[],"mappings":"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","file":"Journeys.js","sourcesContent":["(($) ->\n  # The DOM has loaded\n\n  # Your CoffeeScript goes after this line\n  $('[data-toggle=\"tooltip\"]').tooltip()\n  $ ->\n    $('[data-toggle=\"tooltip\"]').tooltip()\n    return\n\n) jQuery\n","$(document).ready ->\n  # Grid\n  $('.grid').masonry ->\n    itemSelector: '.grid-item',\n    columnWidth: 200\n\n  # Sharing through Facebook\n  $.ajaxSetup cache: true\n  $.getScript 'http://connect.facebook.net/en_US/sdk.js', ->\n    FB.init\n      appId: '1660831194160373'\n      version: 'v2.5'\n    $('#loginbutton,#feedbutton').removeAttr 'disabled'\n    FB.getLoginStatus (response) ->\n      # Now everything has been initialised\n      $('.share-with-facebook').click () ->\n\n        # Fetch the data for the journey\n        # they want to share on Facebook\n        journeyUUID = $(this).parents('.journeyPost').data 'journey-uuid'\n\n        $.get '/journeys/show/' + journeyUUID, (journey) ->\n          # Let them share it\n          FB.ui {\n            method: 'feed'\n            link: 'travelingchildrenproject.dev/journeys'\n            name: journey.creator + '\\'s Journey to ' + journey.title\n            description: journey.body\n            picture: 'https://github.com/Arcrammer/Traveling-Children-Project/blob/master/public/assets/journey_defaults/header_images/3aa39decc5a01363489991f174176f31.jpg?raw=true'\n          }\n\n    # Sharing through Twitter\n    window.twttr = ((d, s, id) ->\n      js = undefined\n      fjs = d.getElementsByTagName(s)[0]\n      t = window.twttr or {}\n      if d.getElementById(id)\n        return t\n      js = d.createElement(s)\n      js.id = id\n      js.src = 'https://platform.twitter.com/widgets.js'\n      fjs.parentNode.insertBefore js, fjs\n      t._e = []\n      t.ready = (f) ->\n        t._e.push f\n        # Now everything has been initialised\n        \n        return\n      t\n    )(document, 'script', 'twitter-wjs')\n\n  # Handling journey post updates\n  journeys = $('.journeyPost')\n  editButtons = $('.journeyEditButton')\n  submitButton = $('input[type=\"submit\"]')\n  titleField = $('input[name=\"title\"]')\n  uuidField = $('input[name=\"post-uuid\"]')\n  dateField = $('input[name=\"date\"]')\n  bodyField = $('textarea[name=\"body\"]')\n  tagsField = $('input#tags')\n\n  editButtons.click ->\n    # The 'Edit' button was\n    # clicked, so we'll get\n    # the 'ID' for the\n    # relative journey\n    #\n    journeyUUID = $(this).parents('.journeyPost').data 'journey-uuid'\n\n    # Ask the server for journey data as JSON\n    $.get '/journeys/show/' + journeyUUID, (journey) ->\n      # The server has sent the JSON; Fill\n      # the edit forms' fields with it\n\n      # Fill the fields\n      titleField.val journey.title\n      uuidField.val journey.uuid\n      dateField.val journey.date\n      bodyField.val journey.body\n      tagsField.val journey.tags.trim().replace(/\\s+/g, ' ')\n\n      # Change the form submission button text\n      submitButton.val 'Update'\n\n      # Set the forms' 'action' to the method that\n      # persists the updated data to the database\n      $('.journey-form')[0].setAttribute 'action', '/journeys/edit'\n\n  $('#journeyModal').on 'hidden.bs.modal', () ->\n    # The modal is hiding, so we'll\n    # replace the 'Create' text of\n    # the other forms' button and\n    # clear the form data\n    #\n    $('.journey-form')[0].reset()\n    submitButton.val 'Create'\n"],"sourceRoot":"/source/"}